<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DALAD Jewelry - Trang S·ª©c B·∫°c Cao C·∫•p</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <a href="#home" class="logo">DALAD </a>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="#home" class="active">Trang Ch·ªß</a></li>
                   
                    <li class="nav-dropdown-item">
                        <a href="#products">
                            C·ª≠a H√†ng 
                            <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
                        </a>
                        <div class="dropdown-menu dropdown-mega">
                            <div class="dropdown-column category-column">
                                <ul class="category-list">
                                    <li class="dropdown-title">Danh M·ª•c S·∫£n Ph·∫©m</li>
                                    <li><a href="#products" onclick="navFilter('nhan', event)">Nh·∫´n</a></li>
                                    <li><a href="#products" onclick="navFilter('daychuyen', event)">D√¢y Chuy·ªÅn</a></li>
                                    <li><a href="#products" onclick="navFilter('vongtay', event)">V√≤ng Tay</a></li>
                                    <li><a href="#products" onclick="navFilter('lacchan', event)">L·∫Øc Ch√¢n</a></li>
                                    <li class="divider"></li>
                                    
                                </ul>
                            </div>
                            <div class="dropdown-column price-column">
                              <ul class="price-list">
    <li class="dropdown-title">L·ªçc Theo Gi√°</li>
    <li><a href="#products" onclick="navFilter('price_under1m', event)">D∆∞·ªõi 1 Tri·ªáu </a></li>
    <li><a href="#products" onclick="navFilter('price_1m_2m', event)">1 Tri·ªáu - 2 Tri·ªáu</a></li>
    <li><a href="#products" onclick="navFilter('price_over2m', event)">Tr√™n 2 Tri·ªáu</a></li>
</ul>
                            </div>
                            <div class="dropdown-column hot-column">
                                <ul class="dropdown-column">
                                    <li class="dropdown-title">S·∫£n Ph·∫©m N·ªïi B·∫≠t</li>
                                    <li><a href="#" onclick="navFilter('hot', event)">S·∫£n Ph·∫©m HOT üî•</a></li>
                                    <li><a href="#" onclick="navFilter('new', event)">H√†ng M·ªõi V·ªÅ</a></li>
                                    <li><a href="#" onclick="navFilter('luxury', event)">Cao C·∫•p (Luxury)</a></li>
                                    <li><a href="#" onclick="navFilter('sale', event)">Khuy·∫øn M√£i (Sale)</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li><a href="#about">V·ªÅ Ch√∫ng T√¥i</a></li>
                    <li><a href="#contact">Li√™n H·ªá</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <button onclick="toggleSearchBar()"><i class="fa-solid fa-magnifying-glass"></i></button>
                <button onclick="toggleCartPopup()"><i class="fa-solid fa-bag-shopping"></i><span class="cart-count" id="cart-count">0</span></button>
                <button class="nav-icon-item" id="auth-nav-item" onclick="openAuthModal(false, event)"><i class="fa-regular fa-user"></i></button>
            </div>
        </div>
        
        <div id="search-bar" class="search-bar-hidden">
            <div class="search-container">
                <input type="text" id="product-search-input" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m...">
                <button class="search-btn">
            <i class="fa-solid fa-magnifying-glass"></i>
        </button>
            </div>
        </div>
    </header>

    <main class="main-content" id="main-content">
        <section id="home" class="hero-section">
            <div class="hero-left">
                <div class="image-wrapper" style="background-image: url('mau1.png');"></div>
            </div>
            <div class="hero-center">
                <h1>CHRISTMAS SALE </h1>
                <h2 class="sale-title">SALE UP TO 30%</h2>
                <a href="#products" class="primary-btn">Xem Ngay C·ª≠a H√†ng <i class="fa-solid fa-arrow-right"></i></a>
                
            <div class="hero-right">
                <div class="image-wrapper" style="background-image: url('mau2.png');"></div>
            </div>
        </section>

        <section class="stat-section">
            <div class="stat-item">
                <h2 class="counter" data-target="15">0</h2>
                <p>NƒÉm Kinh Nghi·ªám</p>
            </div>
            <div class="stat-item">
                <h2 class="counter" data-target="5000">0</h2>
                <p>Kh√°ch H√†ng H√†i L√≤ng</p>
            </div>
            <div class="stat-item">
                <h2 class="counter" data-target="120">0</h2>
                <p>B·ªô S∆∞u T·∫≠p</p>
            </div>
        </section>

        <section id="products" class="product-grid-section">
            <h2>S·∫£n Ph·∫©m N·ªïi B·∫≠t</h2>

            <div class="product-category-tabs" id="product-tabs">
                </div>

            <div class="product-grid" id="product-grid">
                </div>
        </section>

        <section id="about" class="about-section">
            <div class="container">
                <h2>‚ú® V·ªÅ Ch√∫ng T√¥i - DALAD Silver </h2>
                <hr>
                <p class="slogan"> DALAD: H∆°n 15 NƒÉm Theo ƒêu·ªïi S·ª± Tinh Khi·∫øt C·ªßa B·∫°c S925.</p>
                
                <div class="about-content">
                    <p>
                        V·ªõi h√†nh tr√¨nh h∆°n 15 nƒÉm kinh nghi·ªám trong ng√†nh ch·∫ø t√°c kim ho√†n, DALAD t·ª± h√†o l√† th∆∞∆°ng hi·ªáu ti√™n phong mang ƒë·∫øn nh·ªØng thi·∫øt k·∫ø tinh x·∫£o t·ª´ "B·∫°c S925 cao c·∫•p". Ch√∫ng t√¥i kh√¥ng ch·ªâ b√°n trang s·ª©c; ch√∫ng t√¥i ki·∫øn t·∫°o "c·∫£m x√∫c" v√† "phong c√°ch" qua t·ª´ng chi·∫øc nh·∫´n, d√¢y chuy·ªÅn, l·∫Øc tay v√† l·∫Øc ch√¢n.
                    </p>
                    
                    <h3> Thi·∫øt K·∫ø v√† Ch·∫•t L∆∞·ª£ng</h3>
                    <p>
                        DALAD ch·ªçn B·∫°c Sterling (S925) l√†m ch·∫•t li·ªáu c·ªët l√µi, b·ªüi v√¨ n√≥ s·ªü h·ªØu ƒë·ªô b·ªÅn b·ªâ, kh·∫£ nƒÉng ch·∫ø t√°c tinh x·∫£o v√† v·∫ª s√°ng b√≥ng l·∫•p l√°nh kh√¥ng thua k√©m b·∫•t k·ª≥ kim lo·∫°i qu√Ω n√†o. M·ªói s·∫£n ph·∫©m c·ªßa DALAD ƒë·ªÅu tr·∫£i qua quy tr√¨nh ki·ªÉm ƒë·ªãnh ch·∫•t l∆∞·ª£ng nghi√™m ng·∫∑t v√† ƒë∆∞·ª£c √°p d·ª•ng c√¥ng ngh·ªá m·∫° Rhodium (ho·∫∑c v√†ng tr·∫Øng) ti√™n ti·∫øn ƒë·ªÉ "ch·ªëng oxy h√≥a", ƒë·∫£m b·∫£o ƒë·ªô s√°ng b√≥ng, b·ªÅn m√†u v√† an to√†n tuy·ªát ƒë·ªëi cho da.
                    </p>
                    
                    <div class="facts-list">
                        <h4>Th√†nh T·ª±u v√† Cam K·∫øt</h4>
                        <ul>
                            <li><i class="fa-solid fa-medal"></i> - Ch·∫•t li·ªáu: Cam k·∫øt 100% B·∫°c S925 nh·∫≠p kh·∫©u, ti√™u chu·∫©n qu·ªëc t·∫ø.</li>
                            <li><i class="fa-solid fa-paintbrush"></i> - B·ªô S∆∞u T·∫≠p: H∆°n 120+ M·∫´u Thi·∫øt K·∫ø ƒê·ªôc Quy·ªÅn ƒë∆∞·ª£c c·∫≠p nh·∫≠t li√™n t·ª•c.</li>
                            <li><i class="fa-solid fa-heart"></i> - Uy t√≠n: Ph·ª•c v·ª• h∆°n 5.000+ Kh√°ch h√†ng v·ªõi s·ª± h√†i l√≤ng tuy·ªát ƒë·ªëi.</li>
                        </ul>
                    </div>
                    
                    <p>
                        H√£y ƒë·ªÉ DALAD ƒë·ªìng h√†nh c√πng b·∫°n, gi√∫p b·∫°n t·ªèa s√°ng v·∫ª ƒë·∫πp ƒë·∫≥ng c·∫•p v√† b·ªÅn v·ªØng m·ªói ng√†y. Kh√°m ph√° c√°c b·ªô s∆∞u t·∫≠p m·ªõi nh·∫•t c·ªßa ch√∫ng t√¥i ngay h√¥m nay!
                    </p>
                </div>
            </div>
        </section>
        <section id="contact" class="contact-section">
            <h2>Li√™n H·ªá V·ªõi Ch√∫ng T√¥i</h2>
            <div class="contact-container">
                <div class="contact-form">
                    <h3>G·ª≠i Tin Nh·∫Øn</h3>
                    <form>
                        <input type="text" placeholder="H·ªç v√† T√™n" required>
                        <input type="email" placeholder="Email c·ªßa b·∫°n" required>
                        <input type="tel" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                        <textarea placeholder="N·ªôi dung tin nh·∫Øn" required></textarea>
                        <button type="submit" class="submit-btn">G·ª≠i Li√™n H·ªá</button>
                    </form>
                </div>
                <div class="contact-info-card">
                    <h3>Th√¥ng Tin C·ª≠a H√†ng</h3>
                    <p><i class="fa-solid fa-location-dot"></i> 123 Nguy·ªÖn Ch√≠ Thanh, C·∫ßu Gi·∫•y, TP. H√† N·ªôi</p>
                    <p><i class="fa-solid fa-phone"></i> (084) 123 4567</p>
                    <p><i class="fa-solid fa-envelope"></i> dalad@.com.vn</p>
                    <p><i class="fa-solid fa-clock"></i> M·ªü c·ª≠a: T2 - T7 (9h00 - 18h00)</p>
                    <div class="map-placeholder">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.4177763302673!2d105.80334477545696!3d21.015963388217532!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab6098b4dc47%3A0x7e3b7f37a0274fba!2zMTIzIMSQLiBOZ3V54buFbiBDaMOtIFRoYW5oLCBMw6FuZyBI4bqhLCDEkOG7kW5nIMSQYSwgSMOgIE7hu5lpIDEwMDAwMCwgVmnhu4d0IE5hbQ!5e0!3m2!1svi!2s!4v1762610321262!5m2!1svi!2s" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="product-detail-page" class="product-detail-section" style="display: none;">
            <button id="back-to-products" class="btn btn-primary-outline" onclick="backToProductList()"><i class="fas fa-arrow-left"></i> Quay l·∫°i C·ª≠a H√†ng</button>
            
            <div class="product-detail-container">
                <div class="product-image-gallery">
                    <img id="detail-main-image" src="" alt="S·∫£n ph·∫©m chi ti·∫øt" class="main-image">
                </div>
                
                <div class="product-info">
                    <h1 id="detail-name"></h1>
                    <p class="detail-sku">M√£ SP: <span id="detail-sku-value"></span></p>
                    
                    <div class="average-rating">
                        <span class="rating-stars" id="avg-stars-current"></span>
                        <span class="rating-value" id="avg-value-current">0.0</span>
                        <span class="review-count" id="review-count-current">(0 ƒë√°nh gi√°)</span>
                    </div>
                    
                    <p class="detail-price" id="detail-price"></p>
                    <p id="detail-description-full"></p>
                    
                    <button id="detail-add-to-cart-btn" class="btn btn-primary"><i class="fas fa-shopping-cart"></i> Th√™m v√†o Gi·ªè</button>
                </div>
            </div>
            
           <div id="product-reviews-detail-container">
    <h2>ƒê√°nh gi√° s·∫£n ph·∫©m</h2>

    <div id="reviews-list"></div>

    <form id="review-form">
        <h3>Vi·∫øt ƒë√°nh gi√°</h3>

        <label>H·ªç t√™n</label>
        <input type="text" id="reviewer-name" required>

        <label>ƒê√°nh gi√°:</label>
        <div id="review-rating-stars" class="rating-stars">
            <i class="far fa-star" data-value="1"></i>
            <i class="far fa-star" data-value="2"></i>
            <i class="far fa-star" data-value="3"></i>
            <i class="far fa-star" data-value="4"></i>
            <i class="far fa-star" data-value="5"></i>
        </div>
        <input type="hidden" id="rating-input">

        <label>Nh·∫≠n x√©t</label>
        <textarea id="review-comment" required></textarea>

        <button type="submit">G·ª≠i ƒë√°nh gi√°</button>
    </form>
</div>

            
        </section>
        </main>
    
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-logo">
                <a href="#home" class="logo">DALAD <i class="fa-solid fa-gem"></i></a>
                <p>Mang ƒë·∫øn v·∫ª ƒë·∫πp sang tr·ªçng v√† ƒë·∫≥ng c·∫•p qua t·ª´ng m√≥n trang s·ª©c.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

            <div class="footer-links">
                <h4>H·ªó Tr·ª£ Kh√°ch H√†ng</h4>
                <ul>
                   <li><a href="#" onclick="handleFooterLinkClick('chinhsachbaohanh', event)">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('huongdanmuahang', event)">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('phuongthucthanhtoan', event)">Ph∆∞∆°ng th·ª©c thanh to√°n</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('cauhoithuonggap', event)">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a></li>
                </ul>
            </div>
            
            <div class="footer-links">
                <h4>V·ªÅ DALAD</h4>
                <ul>
                    <li><a href="#" onclick="handleFooterLinkClick('tuyendung', event)">Tuy·ªÉn d·ª•ng</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('doitac', event)">ƒê·ªëi t√°c</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('hethongcuahang', event)">H·ªá th·ªëng c·ª≠a h√†ng</a></li>
                    <li><a href="#" onclick="handleFooterLinkClick('chungnhan', event)">Ch·ª©ng nh·∫≠n</a></li>
                </ul>
            </div>

             <div class="footer-newsletter">
    <h4>ƒêƒÇNG K√ù NH·∫¨N TIN</h4>
    <p>Nh·∫≠n ngay th√¥ng tin v·ªÅ s·∫£n ph·∫©m m·ªõi, khuy·∫øn m√£i, v√† m√£ gi·∫£m gi√° ƒë·ªôc quy·ªÅn!</p>
    <form id="newsletter-form"> 
        <input type="email" id="newsletter-email" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ email c·ªßa b·∫°n" required>
        <button type="submit" class="subscribe-btn">ƒêƒÉng K√Ω</button>
    </form>
</div>
        </div>
        <div class="footer-bottom">
            ¬© 2025 DALAD Jewelry. All Rights Reserved.
        </div>
        <div id="info-modal" class="modal-overlay hidden" onclick="closeInfoModalOutside(event)">
        <div class="modal-content info-content">
            <button class="close-modal-btn" onclick="closeInfoModal()">√ó</button>
            <h3 id="info-modal-title"></h3>
            <div id="info-modal-body" class="modal-body-content">
                <p>ƒê√¢y l√† n·ªôi dung m·∫´u cho m·ª•c ƒë√£ ch·ªçn. ƒê·ªÉ ho√†n thi·ªán, b·∫°n c·∫ßn thay th·∫ø n·ªôi dung n√†y b·∫±ng th√¥ng tin ch√≠nh x√°c v·ªÅ ch√≠nh s√°ch, h∆∞·ªõng d·∫´n, ho·∫∑c c∆° h·ªôi tuy·ªÉn d·ª•ng.</p>
            </div>
        </div>
    </div>
    </footer>

  <div id="auth-modal" class="modal-overlay hidden" onclick="closeModalOutside(event)">
    <div class="modal-content auth-content-custom"> <button class="close-modal-btn" onclick="closeModal()">√ó</button>
        <div class="tabs">
            <button class="tab-btn active" id="login-tab" onclick="showPanel('login')">ƒêƒÉng Nh·∫≠p</button>
            <button class="tab-btn" id="register-tab" onclick="showPanel('register')">ƒêƒÉng K√Ω</button>
        </div>

        <div id="login-panel" class="form-panel">
            <h3>Ch√†o m·ª´ng </h3>
            <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ xem l·ªãch s·ª≠ ƒë∆°n h√†ng v√† qu·∫£n l√Ω t√†i kho·∫£n.</p>
            <form id="login-form"> 
                <input type="email" id="login-email" placeholder="Email ho·∫∑c S·ªë ƒëi·ªán tho·∫°i" required> 
                <div class="password-group">
                    <input type="password" placeholder="M·∫≠t kh·∫©u" id="login-password-input" required> 
                    <i class="fa-solid fa-eye-slash" onclick="togglePassword('login-password-input')"></i>
                </div>
                <a href="#" style="display: block; text-align: right; margin-bottom: 20px; font-size: 0.9rem;">Qu√™n m·∫≠t kh·∫©u?</a>
                <button type="submit" class="register-btn">ƒêƒÉng Nh·∫≠p</button>
            </form>
            <div class="divider">HO·∫∂C</div>
            <div class="social-login">
                <a href="https://accounts.google.com/signin" target="_blank" class="google-btn">
                    <i class="fab fa-google"></i> Google
                </a> 
                
                <a href="https://www.facebook.com/login/" target="_blank" class="facebook-btn">
                    <i class="fab fa-facebook-f"></i> Facebook
                </a>
            </div>
        </div>

        <div id="register-panel" class="form-panel hidden">
            <h3>T·∫°o t√†i kho·∫£n m·ªõi</h3>
            <p>ƒêƒÉng k√Ω ngay.</p>
            <form id="register-form"> 
                <input type="text" id="register-name" placeholder="H·ªç v√† T√™n" required> 
                <input type="email" id="register-email" placeholder="Email ho·∫∑c S·ªë ƒëi·ªán tho·∫°i" required> 
                <div class="password-group">
                    <input type="password" placeholder="M·∫≠t kh·∫©u" id="register-password-input" required> 
                    <i class="fa-solid fa-eye-slash" onclick="togglePassword('register-password-input')"></i>
                </div>
                <label class="terms-checkbox">
                    <input type="checkbox" required> T√¥i ƒë·ªìng √Ω v·ªõi <a href="#">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a>
                </label>
                <button type="submit" class="register-btn">ƒêƒÉng K√Ω T√†i Kho·∫£n</button>
            </form>
            <div class="divider">HO·∫∂C</div>
            <div class="social-login">
                <a href="https://accounts.google.com/signin" target="_blank" class="google-btn">
                    <i class="fab fa-google"></i> Google
                </a> 
                
                <a href="https://www.facebook.com/login/" target="_blank" class="facebook-btn">
                    <i class="fab fa-facebook-f"></i> Facebook
                </a>
            </div>
        </div>
    </div>
</div>
<div id="checkout-modal" class="modal-overlay hidden" onclick="closeCheckoutModalOutside(event)">
        <div class="modal-content checkout-content">
            <button class="close-btn" onclick="closeCheckoutModal()">√ó</button>
            
            <h2>üõí Thanh To√°n ƒê∆°n H√†ng</h2>
            
            <div class="checkout-container">
                
                <div class="shipping-info">
                    
    <h3>Th√¥ng Tin Kh√°ch H√†ng</h3>
     <form id="checkout-form">
        <label for="checkout-name">H·ªç v√† t√™n:</label>
        <input type="text" id="checkout-name" required>

        <label for="checkout-email">Email:</label>
        <input type="email" id="checkout-email" placeholder="example@gmail.com" required>

        <label for="checkout-phone">S·ªë ƒëi·ªán tho·∫°i:</label>
        <input type="tel" id="checkout-phone" required>

        <label for="checkout-address">ƒê·ªãa ch·ªâ:</label>
        <input type="text" id="checkout-address" required>
<!-- ƒêo·∫°n m√£ th√™m ph·∫ßn khuy·∫øn m√£i v√†o ph·∫ßn thanh to√°n -->
<!-- Th√™m ngay d∆∞·ªõi ph·∫ßn ph∆∞∆°ng th·ª©c thanh to√°n trong checkout-modal -->

<label for="checkout-promo" style="margin-top:15px; font-weight:600; display:block;">M√£ Khuy·∫øn M√£i:</label>
<div style="display:flex; gap:10px; margin-bottom:15px;">
    <input type="text" id="checkout-promo" placeholder="Nh·∫≠p m√£ gi·∫£m gi√°" style="flex:1; padding:10px; border:1px solid #ddd; border-radius:5px;">
    <button type="button" onclick="applyPromoCode()" style="padding:10px 15px; background:#6780a3; color:white; border:none; border-radius:5px; cursor:pointer;">√Åp d·ª•ng</button>
</div>
<p id="promo-message" style="color:#e74c3c; font-size:0.9rem; margin-top:-10px;"></p>

<script>
function applyPromoCode() {
    const code = document.getElementById('checkout-promo').value.trim().toUpperCase();
    const promoMessage = document.getElementById('promo-message');

    let discount = 0;

    if (code === 'SALE10') discount = 0.10;
    else if (code === 'XMAS30') discount = 0.30;
    else if (code === 'DALAD5') discount = 0.05;

    if (discount > 0) {
        const subtotalText = document.getElementById('summary-subtotal').innerText.replace(/\D/g, '');
        const subtotal = Number(subtotalText);
        const newTotal = subtotal - subtotal * discount;

        document.getElementById('summary-total').innerText = newTotal.toLocaleString('vi-VN') + ' VNƒê';
        promoMessage.style.color = '#27ae60';
        promoMessage.innerText = `√Åp d·ª•ng th√†nh c√¥ng! Gi·∫£m ${(discount * 100)}%`;    
    } else {
        promoMessage.style.color = '#e74c3c';
        promoMessage.innerText = 'M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá!';
    }
}
</script>

        <p>Ph∆∞∆°ng th·ª©c thanh to√°n:</p>
        <label><input type="radio" name="payment" value="cod" checked> Thanh to√°n khi nh·∫≠n h√†ng</label><br>
        <label><input type="radio" name="payment" value="bank"> Chuy·ªÉn kho·∫£n</label>

        <div style="margin-top:15px;">
          <button type="submit" id="submit-order-btn">Ho√†n t·∫•t ƒë·∫∑t h√†ng</button>
          <button type="button" onclick="closeCheckoutModal()">H·ªßy</button>
        </div>
      </form>
</div>

                <div class="order-summary">
                    <h3>T√≥m T·∫Øt ƒê∆°n H√†ng</h3>
                    <div id="checkout-summary-list" class="summary-items-list">
                        <p class="empty-summary-text">Vui l√≤ng ƒë·ª£i...</p> 
                    </div>
                    <div class="summary-totals">
                        <div class="summary-line">
                            <p>T·∫°m t√≠nh:</p> <span id="summary-subtotal">0 VNƒê</span>
                        </div>
                        <div class="summary-line">
                            <p>Ph√≠ v·∫≠n chuy·ªÉn:</p> <span>Mi·ªÖn ph√≠</span>
                        </div>
                        <hr>
                        <div class="summary-line total-line">
                            <p>T·ªïng c·ªông:</p> <span id="summary-total">0 VNƒê</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="cart-popup" class="cart-popup-overlay" onclick="closeCartPopupOutside(event)">
        <div class="cart-popup-content">
            <div class="cart-header">
                <h3>Gi·ªè H√†ng C·ªßa B·∫°n (<span id="cart-count-header">0</span>)</h3>
                <button class="close-cart-btn" onclick="toggleCartPopup()">√ó</button>
            </div>
            
            <div class="cart-items" id="cart-items-container">
                </div>

            <div class="cart-summary">
                <p>T·ªïng ph·ª•: <span id="cart-subtotal">0 VNƒê</span></p>
                <p>Ph√≠ v·∫≠n chuy·ªÉn: <span>Mi·ªÖn ph√≠</span></p>
                <p class="total">T·ªïng c·ªông: <span id="cart-total">0 VNƒê</span></p>
                <button class="primary-btn checkout-btn" onclick="openCheckoutModal()">Thanh To√°n</button>
            </div>
        </div>
    </div>
   <div id="product-detail-modal" class="modal-overlay hidden" onclick="closeDetailModalOutside(event)">
    <div class="modal-content product-detail-content"> 
        <button class="close-modal-btn" onclick="closeProductDetailModal()">√ó</button>
    </div> 
</div>


<div id="success-toast" class="success-toast hidden">
    <span id="toast-message">Th√™m v√†o gi·ªè h√†ng th√†nh c√¥ng!</span>
</div>
        
</body>
</html>

    <script>
        
    const products = [
        // --- NH·∫™N (6 s·∫£n ph·∫©m) ---
        { id: 'p1', name: 'Nh·∫´n La M√£ Kh·∫Øc R·ªóng', category: 'nhan', price: 425000, desc: 'C√° t√≠nh, kh·∫Øc r·ªóng s·ªë La M√£, √Ω nghƒ©a th·ªùi gian.', image: '1.jpg', tag: 'Hot', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        { id: 'p5', name: 'Nh·∫´n Eternity ƒê√≠nh ƒê√° CZ', category: 'nhan', price: 450000, desc: 'Thanh m·∫£nh, vƒ©nh c·ª≠u, ƒëeo x·∫øp l·ªõp.', image: '2.jpg', tag: '', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        { id: 'p8', name: 'Nh·∫´n N∆° Xinh ƒê√° R∆°i', category: 'nhan', price: 650000, desc: 'N∆° ƒë·ªôc ƒë√°o, chuy·ªÉn ƒë·ªông, r·∫•t n·ªØ t√≠nh.', image: '3.jpg', tag: 'VIP', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        { id: 'p11', name: 'Nh·∫´n N∆° ƒê√° Mini D·ªãu D√†ng', category: 'nhan', price: 990000, desc: 'Nh·ªè g·ªçn, duy√™n d√°ng, phong c√°ch tr·∫ª trung.', image: '4.jpg', tag: 'Sale', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        { id: 'p13', name: 'Nh·∫´n N∆° H·ªìng Th·∫°ch Anh', category: 'nhan', price: 500000, desc: 'ƒê√° h·ªìng tr√°i tim, ng·ªçt ng√†o, thu h√∫t √°nh nh√¨n.', image: '5.jpg', tag: 'Luxury', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        { id: 'p14', name: 'Nh·∫´n C·∫∑p Kim C∆∞∆°ng Tr√°i Tim', category: 'nhan', price: 620000, desc: 'T√¨nh y√™u vƒ©nh c·ª≠u.', image: '6.jpg', tag: '', sizes: ['14mm', '15mm', '16mm', '17mm'] },
        
        // --- D√ÇY CHUY·ªÄN (6 s·∫£n ph·∫©m) ---
        { id: 'p2', name: 'D√¢y Chuy·ªÅn B·∫°c Thanh L·ªãch', category: 'daychuyen', price: 890000, desc: 'B·∫°c S925, chu·ªói h·∫°t ƒë√° th·∫£ r∆°i, l·∫•p l√°nh nh·∫π nh√†ng.', image: 'vong1.jpg', tag: 'new', sizes: ['35cm', '40cm', '50cm']},
        { id: 'p6', name: 'D√¢y Chuy·ªÅn B·∫°c N√∫t Th·∫Øt Kim C∆∞∆°ng', category: 'daychuyen', price: 1500000, desc: 'B·∫°c S925, n√∫t th·∫Øt ƒë√° ƒë√¥i, sang tr·ªçng, thanh l·ªãch.', image: 'vong2.jpg', tag: '', sizes: ['35cm', '40cm', '50cm'] },
        { id: 'p9', name: 'D√¢y Chuy·ªÅn B·∫°c ƒê√° V∆∞·ª£t Th·ªùi Gian', category: 'daychuyen', price: 680000, desc: 'B·∫°c S925, chu·ªói ƒë√° kh·ªëi, v·∫ª ƒë·∫πp vƒ©nh c·ª≠u, c·ªï ƒëi·ªÉn.', image: 'voneg3.jpg', tag: '', sizes: ['35cm', '40cm', '50cm'] },
        { id: 'p15', name: 'D√¢y Chuy·ªÅn B·∫°c Gi·ªçt N∆∞·ªõc X·∫øp T·∫ßng', category: 'daychuyen', price: 2100000, desc: 'B·∫°c S925, gi·ªçt n∆∞·ªõc x·∫øp t·∫ßng, thanh tho√°t, tinh x·∫£o.', image: 'vong4.jpg', tag: 'Hot', sizes: ['35cm', '40cm', '50cm'] },
        { id: 'p16', name: 'D√¢y Chuy·ªÅn B·∫°c Hoa Tuy·∫øt ƒê·ªôc ƒê√°o', category: 'daychuyen', price: 1600000, desc: 'B·∫°c S925, hoa tuy·∫øt l·ªìng, tuy√™n ng√¥n phong c√°ch c√° nh√¢n.', image: 'vong5.jpg', tag: 'VIP', sizes: ['35cm', '40cm', '50cm'] },
        { id: 'p17', name: 'D√¢y Chuy·ªÅn B·∫°c M·∫Øt X√≠ch Tinh T·∫ø', category: 'daychuyen', price: 950000, desc: 'B·∫°c S925, d√¢y m·∫£nh, m·∫Øt x√≠ch hi·ªán ƒë·∫°i, t·ªëi gi·∫£n.', image: 'vong6.jpg', tag: 'Sale', sizes: ['35cm', '40cm', '50cm'] },

        // --- L·∫ÆC TAY (6 s·∫£n ph·∫©m) ---
        { id: 'p3', name: 'V√≤ng Tay B·∫°c T√¨nh Y√™u Charm', category: 'vongtay', price: 2100000, desc: 'V√≤ng h·∫°t/bi, m·∫∑t charm h√¨nh tr√°i tim ƒë√≠nh ƒë√° nh·ªè, c√≥ m√≥c n·ªëi.', image: 'nhan1.jpg', tag: 'Sale', sizes: ['15cm', '16cm', '17cm', '18cm'] },
        { id: 'p7', name: 'V√≤ng Tay B·∫°c ƒê√° Kh·ªëi H√¨nh H·ªçc', category: 'vongtay', price: 1800000, desc: 'V√≤ng tay r√∫t (bolo bracelet), d√¢y chu·ªói h·ªôp, m·∫∑t ƒë√≠nh 5 kh·ªëi ƒë√° h√¨nh h·ªçc (gi·ªçt n∆∞·ªõc, vu√¥ng, tr√°i tim).', image: 'nhan2.jpg', tag: 'Hot', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p12', name: 'V√≤ng Tay B·∫°c Tim Charm R·ªóng ', category: 'vongtay', price: 2200000, desc: 'V√≤ng tay d·∫°ng r·∫Øn (snake chain), m·∫∑t charm tr√°i tim r·ªóng ƒë√≠nh ƒë√°, c√≥ ch·ªët kh√≥a.', image: 'nhan3.jpg', tag: 'luxury', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p18', name: 'V√≤ng Tay B·∫°c Kh√≥a Tim Duy√™n D√°ng', category: 'vongtay', price: 2200000, desc: 'V√≤ng tay d·∫°ng r·∫Øn (snake chain), m·∫∑t kh√≥a tr√°i tim ƒë∆°n gi·∫£n ƒë√≠nh ƒë√° nh·ªè.', image: 'nhan4.jpg', tag: 'Luxury', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p19', name: 'V√≤ng Tay B·∫°c D√¢y Xo·∫Øn Kitty', category: 'vongtay', price: 2800000, desc: 'V√≤ng tay d√¢y xo·∫Øn k√©p (twisted cable), m·∫∑t charm h√¨nh ƒë·∫ßu m√®o Hello Kitty (ho·∫∑c t∆∞∆°ng t·ª±) ƒë∆°n gi·∫£n.', image: 'nhan5.jpg', tag: '', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p20', name: 'V√≤ng Tay B·∫°c Tim Kh·∫£m ƒê√≠nh ƒê√°', category: 'vongtay', price: 1500000, desc: 'V√≤ng tay d·∫°ng r·∫Øn (snake chain), m·∫∑t kh√≥a tr√°i tim ƒë√≠nh ƒë√° v√† kh·∫£m m√†u tr·∫Øng (men/s·ª©).', image: 'nhan6.jpg', tag: 'new', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        
        // --- L·∫ÆC CH√ÇN (6 s·∫£n ph·∫©m) ---
        { id: 'p4', name: 'L·∫Øc Ch√¢n B·∫°c Chu·ªói Bi·ªÉn', category: 'lacchan', price: 950000, desc: 'B·∫°c S925. S√°ng l·∫•p l√°nh, duy√™n d√°ng b∆∞·ªõc ch√¢n.', image: 'chan1.jpg', tag: 'Hot', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p10', name: 'L·∫Øc Ch√¢n B·∫°c C·ªè May M·∫Øn Vƒ©nh C·ª≠u', category: 'lacchan', price: 750000, desc: 'B·∫°c S925. C·ªè b·ªën l√°, may m·∫Øn ƒë·ªìng h√†nh.', image: 'chan2.jpg', tag: '', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p21', name: 'L·∫Øc Ch√¢n B·∫°c ƒêi·ªáu Valse Tr√°i Tim', category: 'lacchan', price: 3900000, desc: 'B·∫°c S925. Tim ƒë√° v√°t c·∫°nh, chuy·ªÉn ƒë·ªông quy·∫øn r≈©.', image: 'chan3.jpg', tag: 'VIP', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p22', name: 'L·∫Øc Ch√¢n B·∫°c D·∫° Nguy·ªát T∆∞∆°ng Ph·∫£n', category: 'lacchan', price: 550000, desc: 'B·∫°c S925. ƒê√° ƒëen tr·∫Øng, phong c√°ch hi·ªán ƒë·∫°i.', image: 'chan4.jpg', tag: 'Sale', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p23', name: 'L·∫Øc Ch√¢n B·∫°c N·ª• H·∫°t N·∫Øng S·ªõm', category: 'lacchan', price: 1200000, desc: 'B·∫°c S925. H·∫°t m·∫° v√†ng, r·∫°ng r·ª°, b·∫Øt m·∫Øt.', image: 'chan5.jpg', tag: '', sizes: ['15cm', '16cm', '17cm', '18cm']  },
        { id: 'p24', name: 'L·∫Øc Ch√¢n B·∫°c Thi√™n Nhi√™n Thu Nh·ªè', category: 'lacchan', price: 2800000, desc: 'B·∫°c S925. Charm s√≥ng n∆∞·ªõc, nh·∫π nh√†ng, n·ªØ t√≠nh.', image: 'chan6.jpg', tag: 'new', sizes: ['15cm', '16cm', '17cm', '18cm']  },
    ];

    let cart = []; 
    let selectedSizes = {}; 
    
    // Khai b√°o bi·∫øn DOM
    const checkoutModal = document.getElementById('checkout-modal');
    const checkoutSummaryList = document.getElementById('checkout-summary-list');
    const summarySubtotal = document.getElementById('summary-subtotal');
    const summaryTotal = document.getElementById('summary-total');
    
    const cartPopup = document.getElementById('cart-popup');
    const cartCountElements = document.querySelectorAll('#cart-count, #cart-count-header');
    const cartItemsContainer = document.getElementById('cart-items-container'); 
    const cartSubtotalElement = document.getElementById('cart-subtotal');
    const cartTotalElement = document.getElementById('cart-total');

    const authModal = document.getElementById('auth-modal');
    const loginPanel = document.getElementById('login-panel');
    const registerPanel = document.getElementById('register-panel');
    const loginTab = document.getElementById('login-tab');
    const registerTab = document.getElementById('register-tab');
    const searchBar = document.getElementById('search-bar');
    const counters = document.querySelectorAll('.counter');
    const statSection = document.querySelector('.stat-section');


    const formatCurrency = (amount) => {
         return amount.toLocaleString('vi-VN') + ' VNƒê'; 
    };
    // L∆∞u v√† l·∫•y ƒë√°nh gi√° t·ª´ localStorage
const getReviews = () => JSON.parse(localStorage.getItem("reviews") || "[]");
const saveReviews = (data) => localStorage.setItem("reviews", JSON.stringify(data));

let currentProductId = null;

// Render sao
const renderStars = (rating) => {
    let html = "";
    for (let i = 1; i <= 5; i++) {
        html += `<i class="${i <= rating ? "fas" : "far"} fa-star"></i>`;
    }
    return html;
};

// Hi·ªÉn th·ªã ƒë√°nh gi√° c·ªßa s·∫£n ph·∫©m
const displayReviews = () => {
    const reviewsList = document.getElementById("reviews-list");
    const allReviews = getReviews();
    const productReviews = allReviews.filter(r => r.productId === currentProductId);

    reviewsList.innerHTML = "";

    if (productReviews.length === 0) {
        reviewsList.innerHTML = "<p>Ch∆∞a c√≥ ƒë√°nh gi√° n√†o.</p>";
        return;
    }

    productReviews.forEach(review => {
        const item = document.createElement("div");
        item.className = "review-item";
        item.innerHTML = `
            <div class="review-header">
                <strong>${review.name}</strong>
                <span class="review-stars">${renderStars(review.rating)}</span>
            </div>
            <p class="review-comment">${review.comment}</p>
            <div class="review-date">${review.date}</div>
        `;
        reviewsList.appendChild(item);
    });
};

// X·ª≠ l√Ω ch·ªçn sao
const setupStarInteraction = () => {
    const stars = document.querySelectorAll("#review-rating-stars i");
    const ratingInput = document.getElementById("rating-input");

    stars.forEach(star => {
        star.addEventListener("mouseover", () => {
            let r = star.dataset.value;
            stars.forEach(s => s.className = Number(s.dataset.value) <= r ? "fas fa-star" : "far fa-star");
        });

        star.addEventListener("click", () => {
            ratingInput.value = star.dataset.value;
        });
    });
};

// Submit ƒë√°nh gi√°
const handleReviewSubmit = (event) => {
    event.preventDefault();

    const name = document.getElementById("reviewer-name").value;
    const comment = document.getElementById("review-comment").value;
    const rating = Number(document.getElementById("rating-input").value);

    if (!rating) {
        alert("B·∫°n ph·∫£i ch·ªçn s·ªë sao!");
        return;
    }

    const newReview = {
        productId: currentProductId,
        name,
        comment,
        rating,
        date: new Date().toLocaleDateString("vi-VN"),
    };

    const allReviews = getReviews();
    allReviews.push(newReview);
    saveReviews(allReviews);

    document.getElementById("review-form").reset();
    displayReviews();
    alert("ƒê√°nh gi√° th√†nh c√¥ng!");
};

// G·ªçi khi m·ªü s·∫£n ph·∫©m chi ti·∫øt
function initReviewSection(productId) {
    currentProductId = productId;
    setupStarInteraction();
    displayReviews();
    document.getElementById("review-form").addEventListener("submit", handleReviewSubmit);
}

    const getPriceRange = (price) => {
    // Gi√° tr·ªã 'price' c·∫ßn ƒë∆∞·ª£c truy·ªÅn v√†o d∆∞·ªõi d·∫°ng s·ªë (v√≠ d·ª•: 500000, 1500000).
    
    if (price < 1000000) {
        return 'under1m'; // D∆∞·ªõi 500,000 VNƒê
    }
    
    if (price >= 1000000 && price <= 2000000) {
        return '1m_2m'; // T·ª´ 1,000,000 ƒë·∫øn 2,000,000 VNƒê
    }
    
    if (price > 2000000) {
        return 'over2m'; // Tr√™n 2,000,000 VNƒê
    }
    
    // X·ª≠ l√Ω c√°c tr∆∞·ªùng h·ª£p c√≤n l·∫°i (500K ƒë·∫øn d∆∞·ªõi 1 Tri·ªáu)
    return '500k_1m'; 
};

    const showToast = (message, type = 'success') => {
        const toast = document.getElementById('success-toast');
        const toastMessage = document.getElementById('toast-message');
        
        if (!toast || !toastMessage) return;

        toast.className = 'success-toast hidden';
        toast.classList.add(`toast-${type}`);
        toastMessage.textContent = message;

        toast.classList.remove('hidden');
        
        setTimeout(() => {
            toast.classList.add('hidden');
        }, 3000);
    };
// =================================================================
// 6. X·ª¨ L√ù ƒêƒÇNG NH·∫¨P / ƒêƒÇNG K√ù V√Ä SESSION PERSISTENCE
// =================================================================
const USER_STORAGE_KEY = 'dalad_users';
const CURRENT_USER_KEY = 'dalad_current_user';

// --- A. DATA & LOCALSTORAGE HANDLER ---
const getUsers = () => {
    const users = localStorage.getItem(USER_STORAGE_KEY);
    return users ? JSON.parse(users) : [];
};

const saveUsers = (users) => {
    localStorage.setItem(USER_STORAGE_KEY, JSON.stringify(users));
};

const getCurrentUser = () => {
    const user = localStorage.getItem(CURRENT_USER_KEY);
    return user ? JSON.parse(user) : null;
};

const setCurrentUser = (user) => {
    if (user) {
        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));
    } else {
        localStorage.removeItem(CURRENT_USER_KEY);
    }
    updateAuthDisplay(); // C·∫≠p nh·∫≠t giao di·ªán ngay l·∫≠p t·ª©c
};


// --- B. UI & MODAL HANDLER (H·ªó tr·ª£ c·∫•u tr√∫c tabbed modal c·ªßa b·∫°n) ---

// C·∫≠p nh·∫≠t hi·ªÉn th·ªã n√∫t ƒêƒÉng nh·∫≠p/T√™n t√†i kho·∫£n tr√™n Header
const updateAuthDisplay = () => {
    const navItem = document.getElementById('auth-nav-item');
    const currentUser = getCurrentUser();
    
    if (!navItem) return;

    if (currentUser) {
        // ƒê√£ ƒëƒÉng nh·∫≠p: Hi·ªÉn th·ªã T√™n ng∆∞·ªùi d√πng v√† n√∫t ƒêƒÉng xu·∫•t
        const displayName = currentUser.name || currentUser.email.split('@')[0];
        navItem.innerHTML = `
            <li class="nav-dropdown-item">
                <a href="#" class="auth-link">
                    <i class="fa-solid fa-user"></i> ${displayName}
                    <i class="fa-solid fa-chevron-down dropdown-arrow"></i>
                </a>
                <div class="dropdown-menu auth-dropdown-menu">
                    <ul class="auth-list">
                        <li class="dropdown-title">T√†i Kho·∫£n</li>
                        <li><a href="#" onclick="handleLogout(event)">ƒêƒÉng Xu·∫•t</a></li>
                    </ul>
                </div>
            </li>
        `;
    } else {
        // Ch∆∞a ƒëƒÉng nh·∫≠p: Hi·ªÉn th·ªã n√∫t ƒêƒÉng nh·∫≠p
        navItem.innerHTML = `
            <a href="#" onclick="openAuthModal(false, event)" title="T√†i Kho·∫£n">
                <i class="fa-regular fa-user"></i> ƒêƒÉng nh·∫≠p
            </a>
        `;
    }
};

// H√†m m·ªü Modal ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω (chuy·ªÉn v·ªÅ tab ƒêƒÉng nh·∫≠p ho·∫∑c ƒêƒÉng k√Ω)
const openAuthModal = (isRegisterMode, event) => {
    if (event) event.preventDefault();
    const modal = document.getElementById('auth-modal');
    if (modal) {
        // Reset form v√† hi·ªÉn th·ªã modal
        document.getElementById('login-form').reset();
        document.getElementById('register-form').reset();
        modal.classList.remove('hidden');

        // Chuy·ªÉn panel
        showPanel(isRegisterMode ? 'register' : 'login');
    }
};

// H√†m ƒë√≥ng modal
const closeModal = (id = 'auth-modal') => {
    const modal = document.getElementById(id);
    if (modal) {
        modal.classList.add('hidden');
    }
}

// H√†m h·ªó tr·ª£ cho c·∫•u tr√∫c tabbed modal c·ªßa b·∫°n
const showPanel = (panelId) => {
    // ·∫®n t·∫•t c·∫£ panels v√† b·ªè active t·∫•t c·∫£ tabs
    document.querySelectorAll('.form-panel').forEach(panel => panel.classList.add('hidden'));
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

    // Hi·ªÉn th·ªã panel v√† active tab ƒë∆∞·ª£c ch·ªçn
    document.getElementById(`${panelId}-panel`).classList.remove('hidden');
    document.getElementById(`${panelId}-tab`).classList.add('active');
};

// H√†m h·ªó tr·ª£ ·∫©n/hi·ªán m·∫≠t kh·∫©u
const togglePassword = (inputId) => {
    const input = document.getElementById(inputId);
    const icon = input.nextElementSibling; // Icon l√† element ƒë·ª©ng sau input

    if (input.type === "password") {
        input.type = "text";
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    } else {
        input.type = "password";
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    }
};


// --- C. AUTH LOGIC ---
const handleRegister = (event) => {
    event.preventDefault();
    
    const name = document.getElementById('register-name').value.trim();
    const email = document.getElementById('register-email').value.trim();
    const password = document.getElementById('register-password-input').value.trim();
    
    let users = getUsers();
    
    if (users.some(user => user.email === email)) {
        showToast('Email n√†y ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω!', 'error');
        return false;
    }

    const newUser = {
        id: Date.now(),
        name: name,
        email: email,
        password: password, 
    };
    users.push(newUser);
    saveUsers(users);

    // T·ª± ƒë·ªông ƒëƒÉng nh·∫≠p sau khi ƒëƒÉng k√Ω th√†nh c√¥ng
    setCurrentUser(newUser);
    showToast(`ƒêƒÉng k√Ω th√†nh c√¥ng! Ch√†o m·ª´ng, ${name}.`, 'success');
    closeModal('auth-modal');
    return true;
};

// =================================================================
// H√ÄM X·ª¨ L√ù ƒêƒÇNG NH·∫¨P (handleLogin) - ƒê√É TH√äM LOGIC ADMIN
// =================================================================
const handleLogin = (event) => {
    event.preventDefault(); // NgƒÉn ch·∫∑n form submit m·∫∑c ƒë·ªãnh

    const email = document.getElementById('login-email').value.trim();
    const password = document.getElementById('login-password-input').value.trim();

    // 1. KI·ªÇM TRA ƒêƒÇNG NH·∫¨P ADMIN (Logic m·ªõi)
    // N·∫øu m·∫≠t kh·∫©u l√† '1235', ch√∫ng ta gi·∫£ ƒë·ªãnh ƒë√¢y l√† Admin v√† chuy·ªÉn h∆∞·ªõng
    // T√¥i khuy·∫øn ngh·ªã n√™n th√™m ƒëi·ªÅu ki·ªán ki·ªÉm tra email (v√≠ d·ª•: email === 'admin@dalad.com') ƒë·ªÉ b·∫£o m·∫≠t h∆°n.
    if (password === '1235') {
        
        // T·∫°o m·ªôt ƒë·ªëi t∆∞·ª£ng user gi·∫£ cho Admin v√† l∆∞u v√†o LocalStorage
        const adminUser = { 
            name: "Admin", 
            email: "admin@dalad.com", 
            isAdmin: true // ƒê√°nh d·∫•u l√† Admin
        };
        
        // L∆∞u tr·∫°ng th√°i Admin
        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(adminUser));
        
        showToast('ƒêƒÉng nh·∫≠p Admin th√†nh c√¥ng! Chuy·ªÉn h∆∞·ªõng...', 'success');
        
        // CHUY·ªÇN H∆Ø·ªöNG SANG TRANG ADMIN
        window.location.href = 'admin.html'; 
        return; // D·ª´ng h√†m, kh√¥ng th·ª±c hi·ªán logic ng∆∞·ªùi d√πng th∆∞·ªùng
    }

    // 2. LOGIC ƒêƒÇNG NH·∫¨P NG∆Ø·ªúI D√ôNG B√åNH TH∆Ø·ªúNG (Logic c≈©)
    const users = getUsers();
    const user = users.find(u => u.email === email && u.password === password);

    if (user) {
        // L∆∞u tr·∫°ng th√°i ng∆∞·ªùi d√πng v√†o LocalStorage
        localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user));
        
        closeModal('auth-modal');
        updateAuthDisplay();
        showToast(`Ch√†o m·ª´ng ${user.name} ƒë√£ quay tr·ªü l·∫°i!`, 'success');
        // C√≥ th·ªÉ th√™m l·ªánh chuy·ªÉn h∆∞·ªõng: window.location.reload(); 
    } else {
        showToast('Email ho·∫∑c M·∫≠t kh·∫©u kh√¥ng ƒë√∫ng. Vui l√≤ng th·ª≠ l·∫°i.', 'error');
    }
};
const handleLogout = (event) => {
    if (event) event.preventDefault();
    setCurrentUser(null);
    showToast('B·∫°n ƒë√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng.', 'info');
};

// G√°n s·ª± ki·ªán cho form
const loginForm = document.getElementById('login-form');
if (loginForm) {
    loginForm.addEventListener('submit', handleLogin);
}

const registerForm = document.getElementById('register-form');
if (registerForm) {
    registerForm.addEventListener('submit', handleRegister);
}


// =================================================================
// C·∫¨P NH·∫¨T INIT APP
// =================================================================
// **ƒê·∫£m b·∫£o b·∫°n ƒë√£ g·ªçi updateAuthDisplay() trong h√†m kh·ªüi t·∫°o c·ªßa m√¨nh**
const initApp = () => {
    // ... c√°c h√†m init kh√°c c·ªßa b·∫°n ...
    // updateCartDisplay(); 
    
    // KH·ªûI T·∫†O TR·∫†NG TH√ÅI ƒêƒÇNG NH·∫¨P
    updateAuthDisplay(); 
};

// Ch·∫°y h√†m kh·ªüi t·∫°o ngay khi n·ªôi dung trang ƒë∆∞·ª£c t·∫£i xong
// window.addEventListener('DOMContentLoaded', initApp);
    // H√†m m·ªü Cart Popup
    const openCartPopup = () => {
        if (cartPopup) {
            cartPopup.style.display = 'flex';
        }
    };

    // H√†m ƒë√≥ng Cart Popup 
    const closeCartPopup = () => {
        if (cartPopup) {
            cartPopup.style.display = 'none';
        }
    };
    
    // H√†m ƒë√≥ng/m·ªü Gi·ªè h√†ng
    const toggleCartPopup = () => {
        if (cartPopup) {
            cartPopup.style.display = cartPopup.style.display === 'flex' ? 'none' : 'flex';
        }
    };
    
    const closeCartPopupOutside = (event) => {
        if (event.target === cartPopup) {
            closeCartPopup();
        }
    };
    
    // 3. LOGIC GI·ªé H√ÄNG (CART LOGIC)
 

    const removeFromCart = (productId, size) => {
        const itemIndex = cart.findIndex(item => item.id === productId && (item.size || '') === (size || ''));

        if (itemIndex > -1) {
            cart.splice(itemIndex, 1);
            updateCartDisplay();
            showToast('ƒê√£ x√≥a s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng.', 'warning');
        }
    };

    const changeQuantity = (productId, size, delta) => {
        const item = cart.find(i => i.id === productId && (i.size || '') === (size || '')); 

        if (item) {
            item.quantity += delta;

            if (item.quantity <= 0) {
                removeFromCart(productId, size); 
            } else {
                updateCartDisplay();
            }
        }
    };

    // H√†m C·∫≠p nh·∫≠t hi·ªÉn th·ªã gi·ªè h√†ng
    const updateCartDisplay = () => {
        if (!cartItemsContainer || !cartCountElements.length) return;

        let totalAmount = 0;
        let totalItems = 0;

        cartItemsContainer.innerHTML = ''; 

        if (cart.length === 0) {
            cartItemsContainer.innerHTML = '<p style="text-align: center; color: var(--light-text-color); padding: 20px;">Gi·ªè h√†ng tr·ªëng.</p>';
            cartCountElements.forEach(el => el.textContent = '0');
            if (cartSubtotalElement) cartSubtotalElement.textContent = formatCurrency(0);
            if (cartTotalElement) cartTotalElement.textContent = formatCurrency(0);
            return;
        }

        cart.forEach(item => {
            totalAmount += item.price * item.quantity;
            totalItems += item.quantity;
            
            const currentSize = item.size || ''; 
            const sizeInfo = currentSize ? `<span class="cart-item-size">(Size: ${currentSize})</span>` : '';
            const itemTotal = item.price * item.quantity;
            
            const listItem = document.createElement('div');
            listItem.className = 'cart-item';
            
            listItem.innerHTML = `
                <div class="cart-item-image" style="background-image: url('${item.image}')"></div>
                <div class="cart-item-details">
                    <p class="cart-item-name">${item.name} ${sizeInfo}</p>
                    <p class="cart-item-price-unit">${formatCurrency(item.price)}</p>
                    <div class="cart-item-controls">
                        <button onclick="changeQuantity('${item.id}', '${currentSize}', -1)">-</button>
                        <input type="number" min="1" value="${item.quantity}" readonly>
                        <button onclick="changeQuantity('${item.id}', '${currentSize}', 1)">+</button>
                    </div>
                </div>
                <p class="cart-item-subtotal">${formatCurrency(itemTotal)}</p>
                <button class="remove-item-btn" onclick="removeFromCart('${item.id}', '${currentSize}')">
                    <i class="fa-solid fa-trash-can"></i>
                </button>
            `;
            cartItemsContainer.appendChild(listItem);
        });
        
        cartCountElements.forEach(el => el.textContent = totalItems);
        if (cartSubtotalElement) cartSubtotalElement.textContent = formatCurrency(totalAmount);
        if (cartTotalElement) cartTotalElement.textContent = formatCurrency(totalAmount); 
    };

    // H√†m x·ª≠ l√Ω ch·ªçn size
    const selectSize = (selectedButton, productId) => {
        const container = document.getElementById(`swatch-container-${productId}`);
        const size = selectedButton.getAttribute('data-size');

        if (!container) return; 

        container.querySelectorAll('.size-swatch').forEach(btn => {
            btn.classList.remove('active');
        });

        selectedButton.classList.add('active');
        selectedSizes[productId] = size;
    };
    
    // H√†m th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng
    const addToCart = (productId) => {
        const product = products.find(p => p.id === productId);
        if (!product) return;

        let selectedSize = selectedSizes[productId];

        if (product.sizes && product.sizes.length > 0 && !selectedSize) {
            showToast('Vui l√≤ng ch·ªçn size s·∫£n ph·∫©m.', 'error');
            return;
        }
        
        const existingItem = cart.find(item => item.id === productId && item.size === selectedSize);

        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                ...product, 
                size: selectedSize, 
                quantity: 1
            });
        }

        updateCartDisplay();
        showToast(`ƒê√£ th√™m ${product.name} (Size: ${selectedSize || 'M·∫∑c ƒë·ªãnh'}) v√†o gi·ªè h√†ng!`);
        openCartPopup(); 
    };
    // =================================================================
// LOGIC ƒê·∫∂T H√ÄNG & THANH TO√ÅN
// =================================================================
const ORDERS_KEY = 'dalad_orders';

// H√†m l·∫•y d·ªØ li·ªáu t·ª´ LocalStorage (L·∫∑p l·∫°i logic t·ª´ admin.js)
const getOrders = () => {
    const ordersJson = localStorage.getItem(ORDERS_KEY);
    return ordersJson ? JSON.parse(ordersJson) : [];
};

// H√†m l∆∞u d·ªØ li·ªáu v√†o LocalStorage
const saveOrders = (orders) => {
    localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
};

// H√†m t·∫°o ID ƒë∆°n h√†ng m·ªõi
const generateOrderId = (orders) => {
    const lastId = orders.length > 0 ? orders[orders.length - 1].id : 'DH000';
    const num = parseInt(lastId.substring(2)) + 1;
    return 'DH' + String(num).padStart(3, '0');
};


   
    // 4. LOGIC THANH TO√ÅN 
   
    const renderCheckoutSummary = () => {
        if (!checkoutSummaryList || !summarySubtotal || !summaryTotal) return;
        
        checkoutSummaryList.innerHTML = '';
        let subTotal = 0;

        cart.forEach(item => {
            const itemPrice = item.price * item.quantity;
            subTotal += itemPrice;
            
            const sizeInfo = item.size ? `(${item.size})` : '';

            const itemDiv = document.createElement('div');
            itemDiv.className = 'summary-item';
            itemDiv.innerHTML = `
                <span class="summary-item-name">${item.name} ${sizeInfo} x ${item.quantity}</span>
                <span>${formatCurrency(itemPrice)}</span>
            `;
            checkoutSummaryList.appendChild(itemDiv);
        });

        summarySubtotal.textContent = formatCurrency(subTotal);
        summaryTotal.textContent = formatCurrency(subTotal);
    };

    // H√†m ƒë√≥ng Modal Thanh to√°n
    const closeCheckoutModal = () => {
        if (checkoutModal) checkoutModal.classList.add('hidden');
    };

    /*
      M·ªü Modal Thanh to√°n
     */
    const openCheckoutModal = () => {
        if (!checkoutModal) return console.error("L·ªói: Kh√¥ng t√¨m th·∫•y ph·∫ßn t·ª≠ HTML 'checkout-modal'.");

        if (cart.length === 0) {
            showToast('Gi·ªè h√†ng tr·ªëng. Vui l√≤ng th√™m s·∫£n ph·∫©m.', 'error');
            return;
        }
        const currentUser = localStorage.getItem(CURRENT_USER_KEY);
        if (!currentUser) {
            showToast('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ thanh to√°n.', 'error');
            return; 
        }
        // 1. ƒê√≥ng gi·ªè h√†ng nh·ªè (
        closeCartPopup(); 
        
        // 2. Render t√≥m t·∫Øt ƒë∆°n h√†ng
        renderCheckoutSummary();
        
        // 3. Hi·ªÉn th·ªã modal
        checkoutModal.classList.remove('hidden');
    };

    // ƒê√≥ng Modal khi b·∫•m ra ngo√†i
    const closeCheckoutModalOutside = (event) => {
        if (event.target === checkoutModal) {
            closeCheckoutModal();
        }
    };
    
 // H√†m X·ª≠ l√Ω ƒê·∫∑t h√†ng (ƒê√É CH·ªàNH S·ª¨A)
    const ADMIN_API_ENDPOINT = './api_admin.php'; // Gi·ªØ nguy√™n
    const submitOrder = (event) => {
        event.preventDefault(); 
        
        const form = document.getElementById('checkout-form');
        // L·∫•y ph·∫ßn t·ª≠ t·ªïng ti·ªÅn (Gi·∫£ s·ª≠ c√≥ ID l√† 'summary-total' trong ph·∫ßn T√≥m t·∫Øt)
        const summaryTotalEl = document.getElementById('summary-total'); 
        
        // Ki·ªÉm tra t√≠nh h·ª£p l·ªá c∆° b·∫£n
        if (!form || !summaryTotalEl) {
             (window.showToast || console.error)("L·ªói: Kh√¥ng t√¨m th·∫•y form ho·∫∑c t·ªïng ti·ªÅn ƒë·ªÉ t√≠nh to√°n.", 'error'); 
             return;
        }
        
        if (!form.checkValidity()) {
            form.reportValidity(); 
            return;
        }

        // 1. L·∫•y d·ªØ li·ªáu t·ª´ form
        const name = document.getElementById('checkout-name').value.trim();
        const phone = document.getElementById('checkout-phone').value.trim();
        const address = document.getElementById('checkout-address').value.trim();
        const email = document.getElementById('checkout-email').value.trim();
        const paymentMethodEl = document.querySelector('input[name="payment"]:checked');
        const paymentMethod = paymentMethodEl ? paymentMethodEl.value : null;
        const note = document.getElementById('checkout-note')?.value.trim() || ''; // L·∫•y ghi ch√∫ n·∫øu c√≥

        // L·ªói ki·ªÉm tra c·∫ßn thi·∫øt
        if (!paymentMethod || cart.length === 0) {
             (window.showToast || alert)("Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n v√† ƒë·∫£m b·∫£o gi·ªè h√†ng kh√¥ng tr·ªëng.", 'error'); 
             return;
        }

        // Parse t·ªïng ti·ªÅn t·ª´ DOM (chuy·ªÉn '12.000 VNƒê' -> 12000)
        const totalAmount = parseInt(summaryTotalEl.textContent.replace(/\D/g, "")) || 0;

        // Gi·∫£ l·∫≠p x·ª≠ l√Ω ƒë∆°n h√†ng th√†nh c√¥ng 
        console.log("--- ƒê∆†N H√ÄNG M·ªöI ---");
        console.log(`Kh√°ch h√†ng: ${name} (SƒêT: ${phone})`);
        console.log(`ƒê·ªãa ch·ªâ: ${address}`);
        console.log(`Ph∆∞∆°ng th·ª©c: ${paymentMethod}`);
        console.log(`T·ªïng ti·ªÅn: ${summaryTotalEl.textContent}`); 
        console.log("Chi ti·∫øt s·∫£n ph·∫©m:", cart);
        
        // 2. L∆∞u ƒë∆°n h√†ng v√†o localStorage ƒë·ªÉ hi·ªÉn th·ªã trong Admin
        const orders = getOrders();
        const newOrderId = generateOrderId(orders);
        
        // T·∫°o ƒë·ªëi t∆∞·ª£ng ƒë∆°n h√†ng v·ªõi ƒë·∫ßy ƒë·ªß tr∆∞·ªùng th√¥ng tin
        const newOrder = {
            id: newOrderId,
            customerName: name, // ƒê√£ ƒë·ªïi t√™n tr∆∞·ªùng ƒë·ªÉ r√µ r√†ng h∆°n
            customerEmail: email,
            customerPhone: phone,
            shippingAddress: address, // B·ªï sung ƒë·ªãa ch·ªâ
            paymentMethod: paymentMethod, // B·ªï sung ph∆∞∆°ng th·ª©c thanh to√°n
            note: note, // B·ªï sung ghi ch√∫
            total: totalAmount, // S·ª≠ d·ª•ng gi√° tr·ªã s·ªë ƒë√£ parse
            status: "ƒêang x·ª≠ l√Ω", // ƒê·∫∑t tr·∫°ng th√°i ban ƒë·∫ßu l√† "Ch·ªù duy·ªát"
            date: new Date().toLocaleDateString('vi-VN'), // D√πng format ng√†y d·ªÖ ƒë·ªçc
            items: cart.map(item => ({
                name: item.name,
                qty: item.quantity,
                price: item.price,
                size: item.size || null // Bao g·ªìm size n·∫øu c√≥
            }))
        };

        orders.push(newOrder);
        saveOrders(orders);
        console.log("‚úÖ ƒê√£ l∆∞u ƒë∆°n h√†ng v√†o localStorage:", newOrder);

        
        // 3. X√≥a gi·ªè h√†ng v√† reset
        cart = [];
        // selectedSizes = {}; // Gi·ªØ nguy√™n ho·∫∑c b·ªè qua n·∫øu kh√¥ng d√πng
        updateCartDisplay();
        
        // 4. HI·ªÇN TH·ªä TH√îNG B√ÅO TH√ÄNH C√îNG
        
        closeCheckoutModal(); // ƒê√≥ng Modal Thanh to√°n

        (window.showToast || alert)(
            `üéâ B·∫°n ƒë√£ ƒë·∫∑t h√†ng th√†nh c√¥ng! üéâ\n\n` +
            `M√£ ƒë∆°n h√†ng: ${newOrderId}\n` +
            `T·ªïng ti·ªÅn: ${summaryTotalEl.textContent}\n` +
            `C·∫£m ∆°n b·∫°n ƒë√£ mua s·∫Øm.` , 
            'success'
        );
        
        // Reset form
        form.reset();
        
    };

   
    // 5. LOGIC HI·ªÇN TH·ªä V√Ä L·ªåC S·∫¢N PH·∫®M
  window.filterProducts = () => {
        const categoryFilter = document.getElementById('category-filter').value;
        const sortBy = document.getElementById('sort-by').value;
        
        // 1. T√çNH TO√ÅN RATING v√† t·∫°o m·∫£ng s·∫£n ph·∫©m m·ªõi
        let productsWithRatings = products.map(p => {
            const { avgRating, count } = calculateAverageRating(p.id);
            return {
                ...p,
                rating: avgRating,
                reviewCount: count
            };
        });
    };
    const renderProducts = (filteredProducts) => {
        const container = document.getElementById('product-grid');
        if (!container) return;
        container.innerHTML = ''; 

        if (filteredProducts.length === 0) {
             container.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--light-text-color); margin: 50px 0;">Xin l·ªói, kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o ph√π h·ª£p v·ªõi ti√™u ch√≠ l·ªçc c·ªßa b·∫°n.</p>';
             return;
        }

        filteredProducts.forEach(product => {
            const card = document.createElement('div');
            card.className = `product-card product-category-${product.category} product-price-${getPriceRange(product.price)}`;
            
            const tagHtml = product.tag ? `<span class="badge">${product.tag}</span>` : '';
            
            let sizeSelectHtml = '';
            if (product.sizes && product.sizes.length > 0) {
                const sizeButtons = product.sizes.map(size => 
                    `<button 
                        class="size-swatch" 
                        data-size="${size}" 
                        onclick="selectSize(this, '${product.id}')"
                    >
                        ${size}
                    </button>`
                ).join('');

                sizeSelectHtml = `
                    <div class="size-selector">
                        <p class="size-label">Ch·ªçn Size:</p>
                        <div class="size-swatch-container" id="swatch-container-${product.id}">
                            ${sizeButtons}
                        </div>
                    </div>
                `;
            }

            card.innerHTML = `
                ${tagHtml}
               <div class="product-image" style="background-image: url('${product.image}');" onclick="showProductDetail('${product.id}')"></div>
               <p class="product-name" onclick="showProductDetail('${product.id}')">${product.name}</p
                <p class="product-desc">${product.desc}</p>
                ${sizeSelectHtml} <p class="product-price">${formatCurrency(product.price)}</p>
                <button class="add-to-cart-btn" onclick="addToCart('${product.id}')">
                    <i class="fa-solid fa-cart-shopping"></i> Th√™m v√†o gi·ªè
                </button>
            `;
            container.appendChild(card);
        });
    };

    const renderTabs = () => {
        const tabsContainer = document.getElementById('product-tabs');
        if (!tabsContainer) return;
        const categories = [
            { id: 'all', name: 'T·∫•t C·∫£' },
            { id: 'nhan', name: 'Nh·∫´n' },
            { id: 'daychuyen', name: 'D√¢y Chuy·ªÅn' },
            { id: 'vongtay', name: 'V√≤ng Tay' },
            { id: 'lacchan', name: 'L·∫Øc Ch√¢n' }
        ];

        categories.forEach((cat, index) => {
            const button = document.createElement('button');
            button.className = `tab ${index === 0 ? 'active' : ''}`;
            button.textContent = cat.name;
            button.setAttribute('data-category', cat.id);
            button.onclick = () => filterProducts(cat.id, button);
            tabsContainer.appendChild(button);
        });
    };

    const filterProducts = (filterValue, activeTab = null) => {
        const isPriceFilter = filterValue.startsWith('price_');
        const tagFilters = ['hot', 'new', 'luxury', 'sale'];
        const isTagFilter = tagFilters.includes(filterValue); 
        const priceRange = filterValue.replace('price_', '');
        
        const filteredProducts = products.filter(product => {
            if (filterValue === 'all') return true;
            if (isPriceFilter) {
                return getPriceRange(product.price) === priceRange;
            } 
            else if (isTagFilter) {
                return product.tag && product.tag.toLowerCase() === filterValue; 
            }
            else {
                return product.category === filterValue;
            }
        });

        renderProducts(filteredProducts);

        document.querySelectorAll('#product-tabs .tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        if (activeTab) {
            activeTab.classList.add('active');
        } else if (filterValue === 'all' || !isPriceFilter) {
            const category = isPriceFilter ? 'all' : filterValue;
            const tabToActivate = document.querySelector(`#product-tabs .tab[data-category="${category}"]`);
            if (tabToActivate) {
                tabToActivate.classList.add('active');
            }
        }
        
        const targetSection = document.getElementById('products');
        if (targetSection) {
            const headerHeight = document.querySelector('.main-header')?.offsetHeight || 0;
            window.scrollTo({
                top: targetSection.offsetTop - headerHeight - 10,
                behavior: 'smooth'
            });
        }
        
        document.querySelectorAll('.main-nav a').forEach(a => {
            a.classList.remove('active');
        });
        document.querySelector('.main-nav a[href="#home"]')?.classList.add('active');
    };

    const navFilter = (filterValue, event) => {
        event.preventDefault(); 
        filterProducts(filterValue, null); 
    }
    
    
    // 6. C√ÅC LOGIC KH√ÅC
    // Bi·∫øn DOM cho Info Modal
    const infoModal = document.getElementById('info-modal');
    const infoModalTitle = document.getElementById('info-modal-title');
    const infoModalBody = document.getElementById('info-modal-body');

    // H√†m m·ªü Info Modal v·ªõi n·ªôi dung
    const openInfoModal = (title, contentHTML) => {
        if (!infoModal || !infoModalTitle || !infoModalBody) return;
        
        infoModalTitle.textContent = title;
        infoModalBody.innerHTML = contentHTML;
        infoModal.classList.remove('hidden');
    };

    // H√†m ƒë√≥ng Info Modal
    const closeInfoModal = () => {
        if (infoModal) infoModal.classList.add('hidden');
    };

    // ƒê√≥ng Modal khi b·∫•m ra ngo√†i
    const closeInfoModalOutside = (event) => {
        if (event.target === infoModal) {
            closeInfoModal();
        }
    };

    // H√†m ch·ª©a n·ªôi dung c·ª• th·ªÉ cho t·ª´ng li√™n k·∫øt footer
    const handleFooterLinkClick = (key, event) => {
        event.preventDefault(); // NgƒÉn ch·∫∑n chuy·ªÉn trang

        let title = "";
        let content = "";
        
        // --- N·ªòI DUNG T·ª™NG M·ª§C ---
        switch (key) {
            case 'chinhsachbaohanh':
                title = "Ch√≠nh S√°ch B·∫£o H√†nh Ch√≠nh Th·ª©c";
                content = `
                    <p><strong>1. Th·ªùi gian b·∫£o h√†nh:</strong> 12 th√°ng k·ªÉ t·ª´ ng√†y mua cho l·ªói k·ªπ thu·∫≠t s·∫£n xu·∫•t.</p>
                    <p><strong>2. Ph·∫°m vi:</strong> B·∫£o h√†nh tr·ªçn ƒë·ªùi d·ªãch v·ª• l√†m s√°ng, ƒë√°nh b√≥ng mi·ªÖn ph√≠.</p>
                    <p><strong>3. T·ª´ ch·ªëi b·∫£o h√†nh:</strong> Trang s·ª©c b·ªã g√£y, bi·∫øn d·∫°ng, tr·∫ßy x∆∞·ªõc n·∫∑ng do va ƒë·∫≠p, ho·∫∑c b·ªã t√°c ƒë·ªông b·ªüi h√≥a ch·∫•t.</p>
                `;
                break;
            case 'huongdanmuahang':
                title = "H∆∞·ªõng D·∫´n Mua H√†ng Online Nhanh Ch√≥ng";
                content = `
                    <ol>
                        <li>Ch·ªçn s·∫£n ph·∫©m, b·∫•m v√†o size v√† click "Th√™m v√†o gi·ªè".</li>
                        <li>B·∫•m v√†o bi·ªÉu t∆∞·ª£ng t√∫i h√†ng (<i class="fa-solid fa-bag-shopping"></i>) ·ªü g√≥c tr√™n b√™n ph·∫£i.</li>
                        <li>Ki·ªÉm tra ƒë∆°n h√†ng v√† b·∫•m "Ti·∫øn H√†nh Thanh To√°n".</li>
                        <li>ƒêi·ªÅn th√¥ng tin giao h√†ng v√† ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n.</li>
                        <li>B·∫•m "HO√ÄN T·∫§T ƒê·∫∂T H√ÄNG".</li>
                    </ol>
                `;
                break;
            case 'phuongthucthanhtoan':
                title = "Ph∆∞∆°ng Th·ª©c Thanh To√°n";
                content = `
                    <p>DALAD ch·∫•p nh·∫≠n c√°c ph∆∞∆°ng th·ª©c sau:</p>
                    <ul>
                        <li><i class="fa-solid fa-truck-fast"></i> Thanh to√°n khi nh·∫≠n h√†ng (COD): √Åp d·ª•ng to√†n qu·ªëc.</li>
                        <li><i class="fa-solid fa-building-columns"></i> Chuy·ªÉn kho·∫£n ng√¢n h√†ng: Th√¥ng tin t√†i kho·∫£n s·∫Ω ƒë∆∞·ª£c cung c·∫•p khi b·∫°n ch·ªçn ph∆∞∆°ng th·ª©c n√†y ·ªü b∆∞·ªõc thanh to√°n.</li>
                        <li><i class="fa-solid fa-credit-card"></i> Thanh to√°n qua v√≠ ƒëi·ªán t·ª≠/th·∫ª t√≠n d·ª•ng: S·∫Øp ra m·∫Øt.</li>
                    </ul>
                `;
                break;
            case 'cauhoithuonggap':
                title = "C√¢u H·ªèi Th∆∞·ªùng G·∫∑p (FAQ)";
                content = `
                    <p><strong>Q: B·∫°c S925 c√≥ b·ªã ƒëen kh√¥ng?</strong></p>
                    <p>A: C√≥. B·∫°c S925 v·∫´n c√≥ th·ªÉ b·ªã oxy h√≥a theo th·ªùi gian. Tuy nhi√™n, s·∫£n ph·∫©m DALAD ƒë∆∞·ª£c m·∫° Rhodium gi√∫p h·∫°n ch·∫ø t·ªëi ƒëa qu√° tr√¨nh n√†y. D·ªãch v·ª• l√†m s√°ng tr·ªçn ƒë·ªùi l√† mi·ªÖn ph√≠.</p>
                    <p><strong>Q: T√¥i c√≥ th·ªÉ ƒë·ªïi size kh√¥ng?</strong></p>
                    <p>A: C√≥. Vui l√≤ng li√™n h·ªá hotline (084) 123 4567 trong v√≤ng 7 ng√†y k·ªÉ t·ª´ ng√†y nh·∫≠n h√†ng ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.</p>
                `;
                break;
            case 'tuyendung':
                title = "Tuy·ªÉn D·ª•ng C√πng DALAD";
                content = `
                    <p>Ch√∫ng t√¥i lu√¥n t√¨m ki·∫øm c√°c v·ªã tr√≠:</p>
                    <ul>
                        <li>Chuy√™n vi√™n thi·∫øt k·∫ø trang s·ª©c (Y√™u c·∫ßu 2+ nƒÉm kinh nghi·ªám)</li>
                        <li>Nh√¢n vi√™n b√°n h√†ng t·∫°i c·ª≠a h√†ng (Full-time/Part-time)</li>
                        <li>Chuy√™n vi√™n Marketing Digital</li>
                    </ul>
                    <p>Vui l√≤ng g·ª≠i CV v·ªÅ email: <a href="mailto:dalad@.com.vn">dalad@.com.vn</a></p>
                `;
                break;
            case 'doitac':
                title = "C∆° H·ªôi H·ª£p T√°c & ƒê·ªëi T√°c";
                content = `
                    <p>DALAD ch√†o ƒë√≥n h·ª£p t√°c v·ªõi c√°c ƒë·ªëi t√°c truy·ªÅn th√¥ng, ƒë·∫°i l√Ω ph√¢n ph·ªëi v√† c·ª≠a h√†ng qu√† t·∫∑ng.</p>
                    <p>Vui l√≤ng li√™n h·ªá ph√≤ng ƒê·ªëi t√°c qua email: <a href="mailto:dalad@.com.vn">dalad@.com.vn</a></p>
                `;
                break;
            case 'hethongcuahang':
                title = "H·ªá Th·ªëng C·ª≠a H√†ng";
                content = `
                    <p><strong>Showroom Ch√≠nh:</strong> 123 Nguy·ªÖn Ch√≠ Thanh, C·∫ßu Gi·∫•y, TP. H√† N·ªôi</p>
                    <p>Vui l√≤ng g·ªçi tr∆∞·ªõc khi ƒë·∫øn: (084) 123 4567</p>
                `;
                break;
            case 'chungnhan':
                title = "Ch·ª©ng Nh·∫≠n Ch·∫•t L∆∞·ª£ng";
                content = `
                    <p>DALAD cam k·∫øt t·∫•t c·∫£ s·∫£n ph·∫©m B·∫°c S925 ƒë·ªÅu ƒë·∫°t ti√™u chu·∫©n qu·ªëc t·∫ø. Ch√∫ng t√¥i cung c·∫•p:</p>
                    <ul>
                        <li>Ch·ª©ng nh·∫≠n ngu·ªìn g·ªëc B·∫°c S925 nh·∫≠p kh·∫©u.</li>
                        <li>Cam k·∫øt B·∫°c kh√¥ng ch·ª©a Nickel g√¢y d·ªã ·ª©ng.</li>
                        <li>Phi·∫øu b·∫£o h√†nh ch·∫•t l∆∞·ª£ng ƒëi k√®m m·ªói s·∫£n ph·∫©m.</li>
                    </ul>
                `;
                break;
            default:
                title = "Th√¥ng Tin";
                content = "<p>N·ªôi dung ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t. Vui l√≤ng quay l·∫°i sau.</p>";
        }
        
        openInfoModal(title, content);
    };

   
    window.addEventListener('scroll', () => {
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.main-nav a');
        
        let current = '';
        const headerHeight = document.querySelector('.main-header')?.offsetHeight || 0;

        sections.forEach(section => {
            const sectionTop = section.offsetTop - headerHeight - 10; 
            if (scrollY >= sectionTop) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(a => {
            a.classList.remove('active');
            if (a.getAttribute('href')?.includes(current) && !a.closest('.nav-dropdown-item')) {
                a.classList.add('active');
            }
        });
    });

    
    const speed = 200; 

    const animateCounter = (counter) => {
        const target = +counter.getAttribute('data-target');
        let count = 0;
        
        const updateCount = () => {
            const increment = target / speed;
            if (count < target) {
                count = Math.ceil(count + increment);
                counter.innerText = count.toLocaleString('vi-VN');
                setTimeout(updateCount, 1);
            } else {
                counter.innerText = target.toLocaleString('vi-VN') + (target >= 100 ? '+' : '');
            }
        };
        updateCount();
    };

    
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.5 
    };

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                counters.forEach(animateCounter);
                observer.unobserve(entry.target); 
            }
        });
    }, observerOptions);

    if (statSection) {
        observer.observe(statSection);
    }

    
    const openModal = (panelName) => {
        if (authModal) authModal.classList.remove('hidden');
        showPanel(panelName);
    };

   

    const closeModalOutside = (event) => {
        if (event.target === authModal) {
            closeModal();
        }
    };

   
   
    
    const toggleSearchBar = () => {
        if (!searchBar) return;
        searchBar.classList.toggle('search-bar-visible');
        if (searchBar.classList.contains('search-bar-visible')) {
            searchBar.querySelector('input')?.focus();
        }
    };
    // =================================================================
    // 6. LOGIC T√åM KI·∫æM S·∫¢N PH·∫®M (M·ªöI)
    // =================================================================
    const performSearch = () => {
        const searchInput = document.getElementById('product-search-input');
        // Tr·∫£ v·ªÅ n·∫øu kh√¥ng t√¨m th·∫•y input
        if (!searchInput) return; 

        const query = searchInput.value.trim().toLowerCase();

        // N·∫øu query r·ªóng, hi·ªÉn th·ªã t·∫•t c·∫£ s·∫£n ph·∫©m
        if (query === "") {
            renderProducts(products); // products l√† m·∫£ng s·∫£n ph·∫©m g·ªëc
            return;
        }

        // L·ªçc s·∫£n ph·∫©m
        const filteredProducts = products.filter(p => {
            // T√¨m ki·∫øm theo T√™n s·∫£n ph·∫©m, Danh m·ª•c, v√† M√¥ t·∫£ (desc)
            const nameMatch = p.name.toLowerCase().includes(query);
            const categoryMatch = p.category.toLowerCase().includes(query);
            // Th√™m tr∆∞·ªùng m√¥ t·∫£ (desc) ƒë·ªÉ t√¨m ki·∫øm s√¢u h∆°n
            const descMatch = p.desc ? p.desc.toLowerCase().includes(query) : false; 

            return nameMatch || categoryMatch || descMatch;
        });

        // Hi·ªÉn th·ªã s·∫£n ph·∫©m ƒë√£ l·ªçc
        renderProducts(filteredProducts);
        
        // Th√™m th√¥ng b√°o n·∫øu kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m
        const productGrid = document.getElementById('product-grid');
        if (filteredProducts.length === 0 && productGrid) {
            productGrid.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 50px; color: var(--light-text-color);">
                    Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o li√™n quan ƒë·∫øn t·ª´ kh√≥a: <strong>"${searchInput.value}"</strong>
                </div>
            `;
        }
    };


    
    // 7. KH·ªûI CH·∫†Y 
  
    document.addEventListener('DOMContentLoaded', () => {
        if (products.length > 0) {
            renderProducts(products);
            renderTabs();
        }
        updateCartDisplay();
        
        // G√°n s·ª± ki·ªán cho n√∫t "Ti·∫øn H√†nh Thanh To√°n" trong Cart Popup
        const checkoutBtn = document.querySelector('#cart-popup .checkout-btn');
        if (checkoutBtn) {
            checkoutBtn.onclick = openCheckoutModal; 
        }
        
        // G√°n s·ª± ki·ªán cho form thanh to√°n
        const checkoutForm = document.getElementById('checkout-form');
        if (checkoutForm) {
            checkoutForm.addEventListener('submit', submitOrder);
        }
        // ‚úÖ G√ÅN S·ª∞ KI·ªÜN CHO THANH T√åM KI·∫æM (M·ªöI)
        const searchInput = document.getElementById('product-search-input');
        if (searchInput) {
            // S·ª± ki·ªán 'input' gi√∫p t√¨m ki·∫øm ngay l·∫≠p t·ª©c khi ng∆∞·ªùi d√πng g√µ
            searchInput.addEventListener('input', performSearch);
        }
    });
    
    // G√°n s·ª± ki·ªán ƒë√≥ng modal thanh to√°n khi click ra ngo√†i
    window.addEventListener('click', closeCheckoutModalOutside);
    // =================================================================
    // LOGIC ƒêƒÇNG K√ù NH·∫¨N TIN (Newsletter)
    // =================================================================

    const NEWSLETTER_STORAGE_KEY = 'dalad_subscribers';

    // H√†m l·∫•y danh s√°ch ng∆∞·ªùi ƒëƒÉng k√Ω t·ª´ LocalStorage
    const getSubscribers = () => {
        const subscribersJson = localStorage.getItem(NEWSLETTER_STORAGE_KEY);
        return subscribersJson ? JSON.parse(subscribersJson) : [];
    };

    // H√†m l∆∞u danh s√°ch ng∆∞·ªùi ƒëƒÉng k√Ω v√†o LocalStorage
    const saveSubscribers = (subscribers) => {
        localStorage.setItem(NEWSLETTER_STORAGE_KEY, JSON.stringify(subscribers));
    };

    // H√†m x·ª≠ l√Ω vi·ªác g·ª≠i form
    const handleNewsletterSubmit = (event) => {
        event.preventDefault(); // NgƒÉn ch·∫∑n form submit m·∫∑c ƒë·ªãnh

        const emailInput = document.getElementById('newsletter-email');
        const email = emailInput.value.trim();

        if (email === "") {
            alert("Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ email.");
            return;
        }

        const subscribers = getSubscribers();
        
        // Ki·ªÉm tra tr√πng l·∫∑p
        if (subscribers.some(sub => sub.email === email)) {
            alert(`Email ${email} ƒë√£ ƒë∆∞·ª£c ƒëƒÉng k√Ω nh·∫≠n tin!`);
            emailInput.value = '';
            return;
        }

        const newSubscriber = {
            id: Date.now(), // ID d·ª±a tr√™n th·ªùi gian
            email: email,
            date: new Date().toLocaleDateString('vi-VN')
        };
        
        subscribers.push(newSubscriber);
        saveSubscribers(subscribers);
        
        alert(`C·∫£m ∆°n b·∫°n ƒë√£ ƒëƒÉng k√Ω nh·∫≠n tin v·ªõi email: ${email}`);
        emailInput.value = '';
    };
    
    // G√°n s·ª± ki·ªán cho form ƒëƒÉng k√Ω nh·∫≠n tin
    const newsletterForm = document.getElementById('newsletter-form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', handleNewsletterSubmit);
    }
    function showProductDetail(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;

    // ·∫®n danh s√°ch s·∫£n ph·∫©m
    document.getElementById("products").style.display = "none";

    // Hi·ªán trang chi ti·∫øt
    const detailPage = document.getElementById("product-detail-page");
    detailPage.style.display = "block";

    // G√°n d·ªØ li·ªáu v√†o giao di·ªán
    document.getElementById("detail-main-image").src = product.image;
    document.getElementById("detail-name").textContent = product.name;
    document.getElementById("detail-price").textContent = formatCurrency(product.price);
    document.getElementById("detail-description-full").textContent = product.desc;
    document.getElementById("detail-sku-value").textContent = product.id;

    // G·ªçi h·ªá th·ªëng ƒë√°nh gi√°
    initReviewSection(productId);
}
function backToProductList() {
    document.getElementById("product-detail-page").style.display = "none";
    document.getElementById("products").style.display = "block";
}


</script>
  <script>
// ====== M·ªû MODAL ======
function openModal() {
    document.getElementById("auth-modal").classList.remove("hidden");
}

// ====== ƒê√ìNG MODAL ======
function closeModal() {
    document.getElementById("auth-modal").classList.add("hidden");
}

// ====== ƒê√ìNG MODAL KHI B·∫§M RA NGO√ÄI ======
function closeModalOutside(event) {
    if (event.target.classList.contains("modal-overlay")) {
        closeModal();
    }
}


// ====== CHECKOUT MODAL ======
function openCheckoutModal() {
    document.getElementById("checkout-modal").classList.remove("hidden");
}

function closeCheckoutModal() {
    document.getElementById("checkout-modal").classList.add("hidden");
}

function closeCheckoutModalOutside(event) {
    if (event.target.classList.contains("modal-overlay")) {
        closeCheckoutModal();
    }
}


// ====== SWITCH LOGIN / REGISTER TAB ======
function showPanel(panel) {
    const loginPanel = document.getElementById("login-panel");
    const registerPanel = document.getElementById("register-panel");
    const loginTab = document.getElementById("login-tab");
    const registerTab = document.getElementById("register-tab");

    if (panel === "login") {
        loginPanel.classList.remove("hidden");
        registerPanel.classList.add("hidden");
        loginTab.classList.add("active");
        registerTab.classList.remove("active");
    } else {
        loginPanel.classList.add("hidden");
        registerPanel.classList.remove("hidden");
        loginTab.classList.remove("active");
        registerTab.classList.add("active");
    }
}
</script>
  
</body>
</html>